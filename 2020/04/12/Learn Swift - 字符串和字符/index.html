<!DOCTYPE html>


<html lang="en" >


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Learn Swift - 字符串和字符 |  Hexo
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content on">
      <section class="outer">
  <article id="post-Learn Swift - 字符串和字符" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Learn Swift - 字符串和字符
</h1>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/04/12/Learn%20Swift%20-%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/" class="article-date">
  <time datetime="2020-04-12T07:37:52.772Z" itemprop="datePublished">2020-04-12</time>
</a>
      
      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> Word count:</span>
            <span class="post-count">3.9k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> Reading time≈</span>
            <span class="post-count">15 min</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <hr>
<hr>
<p>字符串是一系列字符，如“hello, world”或“albatross”。Swift字符串由字符串类型表示。可以以各种方式访问字符串的内容，包括作为字符值的集合。</p>
<p>Swift的字符串和字符类型提供了一种快速的、与unicode兼容的方式来处理代码中的文本。字符串的语法创建和操纵轻便,可读性强,与字符串的语法类似于c字符串连接非常简单,只需将两个字符串+操作符,和字符串可变性由常量或变量之间选择,就像Swift其他值一样。还可以使用字符串将常量、变量、文字和表达式插入到更长的字符串中，这个过程称为字符串插值。这使得创建用于显示、存储和打印的自定义字符串值变得很容易。</p>
<p>尽管语法如此简单，Swift的字符串类型是一种快速、现代的字符串实现。每个字符串都由独立于编码的Unicode字符组成，并支持以各种Unicode表示方式访问这些字符。</p>
<h3 id="字符串字面值"><a href="#字符串字面值" class="headerlink" title="字符串字面值"></a>字符串字面值</h3><p>你可以在代码中将预定义的字符串值作为字符串文字包含在内，字符串文字是有双引号（“”）保卫的字符序列。使用字符串文字作为常量或变量的初始值：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> someString = <span class="string">"some string literal value"</span></span><br></pre></td></tr></table></figure>
<h3 id="多行字符串"><a href="#多行字符串" class="headerlink" title="多行字符串"></a>多行字符串</h3><p>如果你需要一个跨越多行的字符串，请使用多行字符串 - 一个有三个双引号引起来的字符序列：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> quotation = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">The White Rabbit put on his spectacles. "</span>Where shall i begin,please your Majesty?<span class="string">" he asked.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span>Begin at the beginning,<span class="string">" the King said gravely, "</span>and go on till you come to the end;<span class="string">" then stop"</span></span><br><span class="line"><span class="string">""</span><span class="string">"</span></span><br></pre></td></tr></table></figure>
<p>多行字符串文字包括其开始和结束引号之间的所有行。字符串开始于开始引号（”””）后面的第一行，结束语结束引号之前的那一行，这意味着下面的字符串都没有换行符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> singleLineString = <span class="string">"These are the same."</span></span><br><span class="line"><span class="built_in">let</span> multilineString = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">These are the same.</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>当源代码包含多行字符串文本中的换行时，该换行符也会出现在字符串的值中。如果你想使用换行符是你的源代码更容易阅读，但你不希望换行符称为字符串值的一部分，在这些行的末尾写一个反斜杠（\）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> softWrappedQuotation = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">The White Rabbit put on his spectacles.  "</span>Where shall I begin, \</span><br><span class="line">please your Majesty?<span class="string">" he asked.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span>Begin at the beginning,<span class="string">" the King said gravely, "</span>and go on \</span><br><span class="line">till you come to the end; <span class="keyword">then</span> stop.<span class="string">"</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>
<p>若要使以换行开头或结尾的多行字符串字面值，请将空行作为第一行或最后一行。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> lineBreaks = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This string starts with a line break.</span></span><br><span class="line"><span class="string">It also ends with a line break.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串字面量中的特殊字符"><a href="#字符串字面量中的特殊字符" class="headerlink" title="字符串字面量中的特殊字符"></a>字符串字面量中的特殊字符</h3><p>转义的特殊字符\0(空字符)、\(反斜杠)、\t(水平制表符)、\n(换行)、\r(回车)、&quot;(双引号)和&#39;(单引号)<br>一个任意的Unicode标量值，写成\u{n}，其中n是一个1-8位的十六进制数(Unicode将在下面的Unicode中讨论)<br>下面的代码显示了这些特殊字符的四个示例。wiseWords常量包含两个转义的双引号。美元符号、blackHeart和sparklingHeart常量演示了Unicode标量格式:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> wiseWords = <span class="string">"\"Imagination is more important than knowledge\" - Einstein"</span></span><br><span class="line">// <span class="string">"Imagination is more important than knowledge"</span> - Einstein</span><br><span class="line"><span class="built_in">let</span> dollarSign = <span class="string">"\u&#123;24&#125;"</span>        // $,  Unicode scalar U+0024</span><br><span class="line"><span class="built_in">let</span> blackHeart = <span class="string">"\u&#123;2665&#125;"</span>      // ♥,  Unicode scalar U+2665</span><br><span class="line"><span class="built_in">let</span> sparklingHeart = <span class="string">"\u&#123;1F496&#125;"</span> // 💖, Unicode scalar U+1F496</span><br></pre></td></tr></table></figure>
<p>因为多行字符串文本使用三个双引号而不是一个，所以可以在多行字符串文本中包含一个双引号(“)，而不需要转义它。若要在多行字符串中包含文本“”，请至少转义其中一个引号。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> threeDoubleQuotationMarks = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">Escaping the first quotation mark \""</span><span class="string">"</span></span><br><span class="line"><span class="string">Escaping all three quotation marks \"\"\"</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br></pre></td></tr></table></figure>


<h3 id="初始化字符串"><a href="#初始化字符串" class="headerlink" title="初始化字符串"></a>初始化字符串</h3><p>要创建一个空字符串值作为构建更长的字符串的起点，可以将一个空字符串文字赋给一个变量，或者使用初始化器语法初始化一个新的字符串实例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//当前文件的静态全局变量var emptyString = <span class="string">""</span>               // empty string literal</span><br><span class="line">var anotherEmptyString = String()  // initializer syntax</span><br><span class="line">// these two strings are both empty, and are equivalent to each other</span><br></pre></td></tr></table></figure>
<p>通过检查一个字符串值的布尔isEmpty属性来判断它是否为空:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> emptyString.isEmpty &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Nothing to see here"</span>)</span><br><span class="line">&#125;</span><br><span class="line">// Prints <span class="string">"Nothing to see here"</span></span><br></pre></td></tr></table></figure>

<h3 id="字符串可变性"><a href="#字符串可变性" class="headerlink" title="字符串可变性"></a>字符串可变性</h3><p>你指定一个特定的字符串是否可以被修改(或改变)，将它赋值给一个变量(在这种情况下它可以被修改)，或者赋值给一个常量(在这种情况下它不能被修改):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var variableString = <span class="string">"Horse"</span></span><br><span class="line">variableString += <span class="string">" and carriage"</span></span><br><span class="line">// variableString is now <span class="string">"Horse and carriage"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> constantString = <span class="string">"Highlander"</span></span><br><span class="line">constantString += <span class="string">" and another Highlander"</span></span><br><span class="line">// this reports a compile-time error - a constant string cannot be modified</span><br></pre></td></tr></table></figure>

<h3 id="String是值类型"><a href="#String是值类型" class="headerlink" title="String是值类型"></a>String是值类型</h3><p>Swift的字符串类型是值类型。如果您创建一个新的字符串值，当它被传递给一个函数或方法时，或者当它被分配给一个常量或变量时，<strong><em>该字符串值将被复制。在每种情况下，都会创建现有字符串值的新副本，并传递或分配新的副本，而不是初始版本</em></strong>。值类型在结构中描述，枚举是值类型。</p>
<p>Swift的默认字符串复制行为确保当一个函数或方法传递给你一个字符串值时，很明显你拥有那个确切的字符串值，不管它来自哪里。您可以确信传递的字符串不会被修改，除非您自己修改它。</p>
<p>在幕后，Swift的编译器优化了字符串的使用，因此只有在绝对必要时才会进行实际的复制。这意味着当使用字符串作为值类型时，总是可以获得很好的性能。</p>
<h3 id="使用字符"><a href="#使用字符" class="headerlink" title="使用字符"></a>使用字符</h3><p>你可以通过一个for-in循环遍历一个字符串来访问单个字符的值:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog!🐶"</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(character)</span><br><span class="line">&#125;</span><br><span class="line">// D</span><br><span class="line">// o</span><br><span class="line">// g</span><br><span class="line">// !</span><br><span class="line">// 🐶</span><br></pre></td></tr></table></figure>
<p>你也可以创建单个字符类型变量或常量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> exclamationMark: Character = <span class="string">"!"</span></span><br></pre></td></tr></table></figure>
<p>字符串值可以通过传递一个字符值数组作为其初始化器的参数来构造:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> catCharacters: [Character] = [<span class="string">"C"</span>, <span class="string">"a"</span>, <span class="string">"t"</span>, <span class="string">"!"</span>, <span class="string">"🐱"</span>]</span><br><span class="line"><span class="built_in">let</span> catString = String(catCharacters)</span><br><span class="line"><span class="built_in">print</span>(catString)</span><br><span class="line">// Prints <span class="string">"Cat!🐱"</span></span><br></pre></td></tr></table></figure>
<h3 id="连接字符串和字符"><a href="#连接字符串和字符" class="headerlink" title="连接字符串和字符"></a>连接字符串和字符</h3><p>可以将字符串值与加法运算符(+)一起添加(或连接)来创建一个新的字符串值:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> string1 = <span class="string">"hello"</span></span><br><span class="line"><span class="built_in">let</span> string2 = <span class="string">" there"</span></span><br><span class="line">var welcome = string1 + string2</span><br><span class="line">// welcome now equals <span class="string">"hello there"</span></span><br></pre></td></tr></table></figure>
<p>您还可以使用加法赋值运算符(+=)向现有的字符串变量追加一个字符串值:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var instruction = <span class="string">"look over"</span></span><br><span class="line">instruction += string2</span><br><span class="line">// instruction now equals <span class="string">"look over there"</span></span><br></pre></td></tr></table></figure>
<p>可以使用字符串类型的append()方法将字符值追加到字符串变量:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> exclamationMark: Character = <span class="string">"!"</span></span><br><span class="line">welcome.append(exclamationMark)</span><br><span class="line">// welcome now equals <span class="string">"hello there!"</span></span><br></pre></td></tr></table></figure>
<p>如果使用多行字符串字面值来构建更长的字符串的行，则希望字符串中的每一行都以换行符结束，包括最后一行。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> badStart = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">one</span></span><br><span class="line"><span class="string">two</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line"><span class="built_in">let</span> end = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">three</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line"><span class="built_in">print</span>(badStart + end)</span><br><span class="line">// Prints two lines:</span><br><span class="line">// one</span><br><span class="line">// twothree</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> goodStart = <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">one</span></span><br><span class="line"><span class="string">two</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line"><span class="built_in">print</span>(goodStart + end)</span><br><span class="line">// Prints three lines:</span><br><span class="line">// one</span><br><span class="line">// two</span><br><span class="line">// three</span><br></pre></td></tr></table></figure>
<p>在上面的代码中，连接badStart和end会产生一个两行字符串，这不是期望的结果。因为badStart的最后一行没有以换行结束，所以这一行与end的第一行结合在一起。相反，goodStart的两行都以换行结束，因此当它与end结合时，结果如预期的那样有三行。</p>
<h3 id="字符串插值"><a href="#字符串插值" class="headerlink" title="字符串插值"></a>字符串插值</h3><p>字符串插值是一种通过将常量、变量、文字和表达式的值包含在字符串文字中来构造新字符串值的方法。您可以在单行和多行字符串文字中使用字符串插值。您插入到字符串文字中的每一项都被包装在一对括号中，以反斜杠()作为前缀:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> multiplier = 3</span><br><span class="line"><span class="built_in">let</span> message = <span class="string">"\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"</span></span><br><span class="line">// message is <span class="string">"3 times 2.5 is 7.5"</span></span><br></pre></td></tr></table></figure>
<p>在上面的示例中，乘数的值作为(multiplier)插入到字符串文字中。当计算字符串插值以创建实际字符串时，这个占位符将被乘数的实际值所取代。</p>
<p>倍增器的值也是字符串中稍后更大的表达式的一部分。这个表达式计算Double(multiplier) * 2.5的值，并将结果(7.5)插入到字符串中。在本例中，当表达式包含在字符串文本中时，它被写成(Double(multiplier) * 2.5)。</p>
<p>可以使用扩展字符串分隔符创建包含字符的字符串，否则这些字符将被视为字符串插值表达式。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//在扩展字符串中，multiplier插值将会被当做是字符串</span><br><span class="line"><span class="built_in">let</span> multiplier = 3</span><br><span class="line"><span class="built_in">print</span>(<span class="comment">#"Write an interpolated string in Swift using \(multiplier)."#)</span></span><br><span class="line">// Prints <span class="string">"Write an interpolated string in Swift using \(multiplier)."</span></span><br></pre></td></tr></table></figure>
<p>若要在使用扩展分隔符的字符串内使用字符串插值表达式，请将反斜杠后的数字符号的数量与字符串开头和结尾的数字符号的数量相匹配。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="comment">#"6 times 7 is \#(6 * 7)."#)</span></span><br><span class="line">// Prints <span class="string">"6 times 7 is 42."</span></span><br></pre></td></tr></table></figure>
<h3 id="访问和修改字符串"><a href="#访问和修改字符串" class="headerlink" title="访问和修改字符串"></a>访问和修改字符串</h3><p>您可以通过字符串的方法和属性，或者使用下标语法来访问和修改字符串。</p>
<h4 id="字符串索引"><a href="#字符串索引" class="headerlink" title="字符串索引"></a>字符串索引</h4><p>每个字符串值都有一个关联的索引类型String。索引，它对应于字符串中每个字符的位置。</p>
<p>如上所述，不同的字符可能需要不同数量的内存来存储，因此为了确定哪个字符位于特定的位置，必须从字符串的开始或结束遍历每个Unicode标量。由于这个原因，Swift字符串不能被整数值索引。</p>
<p>使用startIndex属性访问字符串的第一个字符的位置。<strong><em>endIndex属性是字符串中最后一个字符之后的位置</em></strong>。因此，endIndex属性不是字符串下标的有效参数。如果字符串为空，startIndex和endIndex是相等的。</p>
<p>使用String的index(before:)和index(after:)方法访问给定索引之前和之后的索引。要访问离给定索引更远的索引，可以使用index(_:offsetBy:)方法，而不是多次调用这些方法中的一个。</p>
<p>可以使用下标语法在特定字符串索引处访问字符。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> greeting = <span class="string">"Guten Tag!"</span></span><br><span class="line">greeting[greeting.startIndex]</span><br><span class="line">// G</span><br><span class="line">greeting[greeting.index(before: greeting.endIndex)]</span><br><span class="line">// !</span><br><span class="line">greeting[greeting.index(after: greeting.startIndex)]</span><br><span class="line">// u</span><br><span class="line"><span class="built_in">let</span> index = greeting.index(greeting.startIndex, offsetBy: 7)</span><br><span class="line">greeting[index]</span><br><span class="line">// a</span><br></pre></td></tr></table></figure>
<p>试图访问字符串范围之外的索引或字符串范围之外的索引中的字符将触发运行时错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">greeting[greeting.endIndex] // Error</span><br><span class="line">greeting.index(after: greeting.endIndex) // Error</span><br></pre></td></tr></table></figure>
<p>使用indices属性访问字符串中单个字符的所有索引。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> greeting.indices &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(greeting[index]) "</span>, terminator: <span class="string">""</span>)</span><br><span class="line">&#125;</span><br><span class="line">// Prints <span class="string">"G u t e n   T a g ! "</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串的插入和删除"><a href="#字符串的插入和删除" class="headerlink" title="字符串的插入和删除"></a>字符串的插入和删除</h3><p>若要在指定索引处将单个字符插入到字符串中，请使用insert(_:at:)方法，若要在指定索引处插入另一个字符串的内容，请使用insert(contentsOf:at:)方法。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var welcome = <span class="string">"hello"</span></span><br><span class="line">welcome.insert(<span class="string">"!"</span>, at: welcome.endIndex)</span><br><span class="line">// welcome now equals <span class="string">"hello!"</span></span><br><span class="line"></span><br><span class="line">welcome.insert(contentsOf: <span class="string">" there"</span>, at: welcome.index(before: welcome.endIndex))</span><br><span class="line">// welcome now equals <span class="string">"hello there!"</span></span><br></pre></td></tr></table></figure>
<p>要从指定索引处的字符串中删除单个字符，请使用remove(at:)方法，要在指定范围内删除子字符串，请使用removeSubrange(_:)方法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">welcome.remove(at: welcome.index(before: welcome.endIndex))</span><br><span class="line">// welcome now equals <span class="string">"hello there"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> range = welcome.index(welcome.endIndex, offsetBy: -6)..&lt;welcome.endIndex</span><br><span class="line">welcome.removeSubrange(range)</span><br><span class="line">// welcome now equals <span class="string">"hello"</span></span><br></pre></td></tr></table></figure>
<h3 id="子字符串"><a href="#子字符串" class="headerlink" title="子字符串"></a>子字符串</h3><p>当您从字符串中获取子字符串时(例如，使用下标或类似prefix(_:)的方法)，结果是子字符串的实例，而不是另一个字符串。Swift中的子字符串具有与字符串相同的大部分方法，这意味着可以像处理字符串一样处理子字符串。但是，与字符串不同的是，在对字符串执行操作时，子字符串只能使用很短的时间。当您准备将结果存储更长的时间时，可以将子字符串转换为String的实例。例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> greeting = <span class="string">"Hello, world!"</span></span><br><span class="line"><span class="built_in">let</span> index = greeting.firstIndex(of: <span class="string">","</span>) ?? greeting.endIndex</span><br><span class="line"><span class="built_in">let</span> beginning = greeting[..&lt;index]</span><br><span class="line">// beginning is <span class="string">"Hello"</span></span><br><span class="line"></span><br><span class="line">// Convert the result to a String <span class="keyword">for</span> long-term storage.</span><br><span class="line"><span class="built_in">let</span> newString = String(beginning)</span><br></pre></td></tr></table></figure>
<p>与字符串一样，每个子字符串都有一个存储区域，其中存储组成子字符串的字符。字符串和子字符串之间的区别在于，作为性能优化，子字符串可以重用用于存储原始字符串的部分内存，或者用于存储另一个子字符串的部分内存。(字符串有类似的优化，但如果两个字符串共享内存，它们是相等的。)这种性能优化意味着在修改字符串或子字符串之前，不必为复制内存付出性能代价。如上所述，子字符串不适合长期存储——因为它们重用了原始字符串的存储，只要使用它的任何子字符串，就必须将整个原始字符串保存在内存中。</p>
<p><strong><em>在上面的例子中，greeting是一个字符串，这意味着它有一个存储组成字符串的字符的内存区域。因为开头是问候语的子字符串，所以它重用问候语使用的内存。相反，newString是字符串——当它从子字符串创建时，它有自己的存储</em></strong>。</p>
<h3 id="比较字符串"><a href="#比较字符串" class="headerlink" title="比较字符串"></a>比较字符串</h3><p>Swift提供了三种比较文本值的方法:字符串和字符相等、前缀相等和后缀相等。</p>
<h4 id="字符串和字符相等"><a href="#字符串和字符相等" class="headerlink" title="字符串和字符相等"></a>字符串和字符相等</h4><p>字符串和字符的相等性由“等于”运算符(==)和“不等于”运算符(!=)进行检查，如比较运算符中所述:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> quotation = <span class="string">"We're a lot alike, you and I."</span></span><br><span class="line"><span class="built_in">let</span> sameQuotation = <span class="string">"We're a lot alike, you and I."</span></span><br><span class="line"><span class="keyword">if</span> quotation == sameQuotation &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"These two strings are considered equal"</span>)</span><br><span class="line">&#125;</span><br><span class="line">// Prints <span class="string">"These two strings are considered equal"</span></span><br></pre></td></tr></table></figure>
<p>如果两个字符串值(或两个字符值)的扩展字符簇在标准上是等价的，则认为它们是相等的。如果扩展的字符集群具有相同的语言含义和外观，那么它们在标准上是等价的，即使它们是由不同的Unicode标量在幕后组成的。</p>
<h3 id="前缀和后缀相等"><a href="#前缀和后缀相等" class="headerlink" title="前缀和后缀相等"></a>前缀和后缀相等</h3><p>要检查一个字符串是否具有特定的字符串前缀或后缀，请调用该字符串的hasPrefix(<em>:)和hasSuffix(</em>:)方法，这两个方法都接受一个string类型的参数并返回一个布尔值。</p>
<p>下面的例子考虑一个字符串数组，表示莎士比亚的《罗密欧与朱丽叶》前两幕的场景位置:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">let</span> romeoAndJuliet = [</span><br><span class="line">    <span class="string">"Act 1 Scene 1: Verona, A public place"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 2: Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 3: A room in Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 4: A street outside Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 1 Scene 5: The Great Hall in Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 1: Outside Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 2: Capulet's orchard"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 3: Outside Friar Lawrence's cell"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 4: A street in Verona"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 5: Capulet's mansion"</span>,</span><br><span class="line">    <span class="string">"Act 2 Scene 6: Friar Lawrence's cell"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>你可以使用hasPrefix(_:)方法与romeoAndJuliet数组一起计算戏剧场景1的数量:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var act1SceneCount = 0</span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasPrefix(<span class="string">"Act 1 "</span>) &#123;</span><br><span class="line">        act1SceneCount += 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"There are \(act1SceneCount) scenes in Act 1"</span>)</span><br><span class="line">// Prints <span class="string">"There are 5 scenes in Act 1"</span></span><br></pre></td></tr></table></figure>
<p>类似地，使用hasSuffix(_:)方法来计算发生在Capulet的豪宅和Friar Lawrence的牢房内或周围的场景的数量:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var mansionCount = 0</span><br><span class="line">var cellCount = 0</span><br><span class="line"><span class="keyword">for</span> scene <span class="keyword">in</span> romeoAndJuliet &#123;</span><br><span class="line">    <span class="keyword">if</span> scene.hasSuffix(<span class="string">"Capulet's mansion"</span>) &#123;</span><br><span class="line">        mansionCount += 1</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> scene.hasSuffix(<span class="string">"Friar Lawrence's cell"</span>) &#123;</span><br><span class="line">        cellCount += 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\(mansionCount) mansion scenes; \(cellCount) cell scenes"</span>)</span><br><span class="line">// Prints <span class="string">"6 mansion scenes; 2 cell scenes"</span></span><br></pre></td></tr></table></figure>

      
      <!-- reward -->
      
      <div id="reward-btn">
        Reward
      </div>
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>Copyright： </strong>
              Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://yoursite.com/2020/04/12/Learn%20Swift%20-%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E7%AC%A6/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>
      
      

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2020/04/12/Learn%20GPUImage/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Learn GPUImage
          
        </div>
      </a>
    
    
      <a href="/2020/04/12/Learn%20Swift%20-%20%E6%8E%A7%E5%88%B6%E6%B5%81/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">Learn Swift - 控制流</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        notify: 'false',
        verify: 'false',
        avatar: 'monsterid',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        John Doe
      </li>
      <li>
        
        Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Hexo"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i></p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['面朝大海，春暖花开', '', ''],
      startDelay: 0,
      typeSpeed: 200,
      loop: true,
      backSpeed: 100,
      showCursor: true
    });
  } catch (err) {
  }

</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: 'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto'
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>



<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>





<script src="/js/busuanzi-2.3.pure.min.js"></script>



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>


    
  </div>
</body>

</html>